<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <title>Slaptas Kalƒód≈≥ Senelis ‚Äì dovan≈≥ ratas</title>
  <style>
    * {
      box-sizing: border-box; /* —á—Ç–æ–±—ã –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ –ª–æ–º–∞–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∫—Ä—É–≥–∞ */
    }

    body {
      font-family: system-ui, sans-serif;
      background: #ffffff;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      gap: 20px;
    }

    h1 {
      margin: 0;
      font-size: 24px;
      text-align: center;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      justify-content: center;
      max-width: 900px;
      width: 100%;
    }

    .panel {
      background: #f7f7f7;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 16px;
      flex: 1;
      max-width: 300px;
    }

    .panel.right {
      max-width: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .names-list ul {
      padding-left: 18px;
      margin: 8px 0 0;
    }

    .small-note {
      font-size: 12px;
      color: #666;
      margin-top: 8px;
    }

    .wheel-wrapper {
      position: relative;
      width: 320px;
      height: 320px;
      margin: 0 auto;
    }

    .wheel {
      position: absolute;
      left: 0;
      top: 0;
      width: 320px;
      height: 320px;
      border-radius: 50%;
      border: 4px solid #444;
      transition: transform 4s ease-out;
      background: conic-gradient(
        hsl(0,80%,60%) 0deg 45deg,
        hsl(40,80%,60%) 45deg 90deg,
        hsl(80,80%,60%) 90deg 135deg,
        hsl(120,80%,60%) 135deg 180deg,
        hsl(160,80%,60%) 180deg 225deg,
        hsl(200,80%,60%) 225deg 270deg,
        hsl(260,80%,60%) 270deg 315deg,
        hsl(320,80%,60%) 315deg 360deg
      );
    }

    .pointer {
      position: absolute;
      left: 50%;
      top: -18px;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 18px solid transparent;
      border-right: 18px solid transparent;
      border-bottom: 28px solid #f00;
    }

    .wheel-center {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 120px;
      height: 120px;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      background: #ffffff;
      border: 2px solid #555;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 10px;
      z-index: 5;
    }

    .wheel-center span {
      font-size: 20px;
      font-weight: 600;
    }

    button {
      cursor: pointer;
      border-radius: 8px;
      border: none;
      padding: 10px 18px;
      font-size: 14px;
      background: #4caf50;
      color: white;
    }

    button.secondary {
      background: #ccc;
      color: #000;
    }

    button:disabled {
      opacity: 0.5;
      cursor: default;
    }

    select {
      padding: 6px 10px;
      border-radius: 8px;
      border: 1px solid #aaa;
      font-size: 14px;
    }

    .result {
      font-weight: 700;
      font-size: 16px;
      min-height: 20px;
    }

    .status {
      font-size: 17px;
      min-height: 24px;
      color: #444;
    }
  </style>
</head>
<body>

<h1>Slaptas Kalƒód≈≥ Senelis</h1>

<div class="container">

  <div class="panel">
    <strong>Dalyviai:</strong>
    <div class="names-list">
      <ul id="namesList"></ul>
    </div>
    <div class="small-note">
      1. Pasirink savo vardƒÖ.<br>
      2. Spausk ‚ÄûSukti ratƒÖ‚Äú.<br>
      3. Su≈æinok, kam dovanoji üòä
    </div>
  </div>

  <div class="panel right">
    <div class="wheel-wrapper">
      <div class="pointer"></div>
      <div class="wheel" id="wheel">
        <div class="wheel-center">
          <span id="centerLabel">Pasirink<br>vardƒÖ</span>
        </div>
      </div>
    </div>

    <div>
      Tu esi ‚Äì 
      <select id="playerSelect">
        <option value="">‚Äî pasirink vardƒÖ ‚Äî</option>
      </select>
    </div>

    <div class="result" id="resultText"></div>

    <button id="spinBtn" disabled>Sukti ratƒÖ</button>
    <button class="secondary" id="resetBtn">I≈° naujo</button>

    <div class="status" id="status"></div>
  </div>

</div>

<script>
  const participants = [
    "Adrija","Emilis","Saulius","Lyra",
    "Einoras","Neda","Kevin","Marius"
  ];

  const receiversByGiver = {
    "Adrija":"Emilis",
    "Emilis":"Saulius",
    "Saulius":"Lyra",
    "Lyra":"Einoras",
    "Einoras":"Neda",
    "Neda":"Kevin",
    "Kevin":"Marius",
    "Marius":"Adrija"
  };

  const namesListEl = document.getElementById("namesList");
  const playerSelect = document.getElementById("playerSelect");
  const wheel = document.getElementById("wheel");
  const spinBtn = document.getElementById("spinBtn");
  const resetBtn = document.getElementById("resetBtn");
  const centerLabel = document.getElementById("centerLabel");
  const resultText = document.getElementById("resultText");
  const statusEl = document.getElementById("status");

  function init() {
    participants.forEach(name=>{
      const li=document.createElement("li");
      li.textContent=name;
      namesListEl.appendChild(li);

      const opt=document.createElement("option");
      opt.value=name;
      opt.textContent=name;
      playerSelect.appendChild(opt);
    });
  }

  playerSelect.addEventListener("change",()=>{
    const name = playerSelect.value;
    resultText.textContent="";
    // —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–≤–æ—Ä–æ—Ç
    wheel.style.transition="none";
    wheel.style.transform="rotate(0deg)";
    void wheel.offsetWidth;

    if(!name){
      centerLabel.innerHTML="Pasirink<br>vardƒÖ";
      spinBtn.disabled=true;
      statusEl.textContent="Pasirink savo vardƒÖ.";
      return;
    }

    centerLabel.textContent=name;
    statusEl.textContent="Spausk ‚ÄûSukti ratƒÖ‚Äú.";
    spinBtn.disabled=false;
  });

  spinBtn.addEventListener("click",()=>{
    const giver = playerSelect.value;
    if(!giver) return;

    const receiver = receiversByGiver[giver];
    if(!receiver){
      statusEl.textContent="Klaida: nƒóra kam dovanoti.";
      return;
    }

    const index = participants.indexOf(receiver);
    const sectorAngle = 360/participants.length;
    const target = (index+0.5)*sectorAngle;

    // —Å–±—Ä–æ—Å –≤ 0 –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏
    wheel.style.transition="none";
    wheel.style.transform="rotate(0deg)";
    void wheel.offsetWidth;

    const finalRot = 360*4 + (90 - target); // —á—Ç–æ–±—ã –Ω—É–∂–Ω—ã–π —Å–µ–∫—Ç–æ—Ä –≤—Å—Ç–∞–ª –∫ —Å—Ç—Ä–µ–ª–∫–µ

    wheel.style.transition="transform 4s ease-out";
    wheel.style.transform=`rotate(${finalRot}deg)`;

    statusEl.textContent="Ratas sukasi...";

    setTimeout(()=>{
      centerLabel.textContent=receiver;
      resultText.textContent=`${giver} dovanoja dovanƒÖ ${receiver}`;
      statusEl.textContent="Atsimink! Niekam nesakyk üòä";
    },4000);
  });

  resetBtn.addEventListener("click",()=>{
    playerSelect.value="";
    centerLabel.innerHTML="Pasirink<br>vardƒÖ";
    resultText.textContent="";
    statusEl.textContent="";
    spinBtn.disabled=true;
    wheel.style.transition="none";
    wheel.style.transform="rotate(0deg)";
    void wheel.offsetWidth;
  });

  init();
</script>

</body>
</html>
